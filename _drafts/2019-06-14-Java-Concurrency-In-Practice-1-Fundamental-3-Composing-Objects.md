---
layout: post
title: Java 并发编程实战-学习日志（一）3：对象的组合
date: 2019-06-14 15:03:04
author: admin
comments: true
categories: [Java]
tags: [Java, Concurrency, Java Concurrency In Practice]

---



<!-- more -->

[TOC]

------

# 设计线程安全的类

在设计线程安全的类时，需要包含以下三个要素：

- 找出构成对象状态的所有变量
- 找出约束状态变量的不变性条件
- 建立对象状态的并发访问管理策略

## 1. 收集同步需求

要确保类的安全，就需要确保它的不变性条件不会在并发的情况下被破坏，这就需要对其状态进行推断。对象和变量都有一个状态空间，即取值范围。状态空间越小，就越容易判断线程的状态。





## 2. 依赖状态的操作



## 3. 状态的所有权



# 实例封闭



## 1. Java 的监视器模式



## 2. 示例：车辆追踪



# 线程安全性的委托



## 1. 基于委托的车辆追踪器



## 2. 独立的状态变量



## 3. 当委托失效时



## 4. 发布底层的状态变量



## 5. 发布状态的车辆追踪器



